# 4.20.1-pt1.11-cuda11.6:
#   extra_tags:
#     - "4.20.1"
#     - latest
#   template:
#     template_path: templates/Dockerfile.cpu
#     base_image: nvidia/cuda:11.5.1-base-ubuntu20.04
#     env_variables:
#       - key: TEST
#         value: 1
#     conda_channels:
#       - conda-forge
#     conda_dependencies:
#       - python=3.9.13
#       - pytorch::pytorch=1.11.0=py3.9_cuda11.5_cudnn8.3.2_0
#       - nvidia::cudatoolkit=11.5
#       - tensorboard
#       - mpi4py=3.0 # installs cuda-aware openmpi
#       - pip:
#         - transformers[sklearn,sentencepiece,audio,vision]==4.20.1

4.20.1-pt1.11-cpu:
  extra_tags:
    - "4.20.1"
    - latest
  template:
    template_path: templates/Dockerfile.cpu
    base_image: ubuntu:20.04
    env_variables:
      - key: TEST
        value: 1
    conda_channels:
      - conda-forge
    conda_dependencies:
      - python=3.9.13
      - pytorch::pytorch=1.11.0=py3.9_cpu_0
      - tensorboard
      - pip:
        - transformers[sklearn,sentencepiece,audio,vision]==4.20.1
